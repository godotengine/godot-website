<!doctype html><html lang=en><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="Godot Engine"><meta name=description content="For the 2021 edition of the Google Summer of Code, we have 5 students working on great features for Godot Engine: DAP backend, pseudolocalization, soft-body improvements, auto-layout in GraphEdit, and a command palette!"><script defer data-domain=godotengine.org src=https://plausible.godot.foundation/js/script.file-downloads.outbound-links.js></script><meta property="og:site_name" content="Godot Engine"><meta property="og:url" content="https://godotengine.org/article/gsoc-2021-progress-report-1/"><meta property="og:type" content="website"><meta property="og:description" content="For the 2021 edition of the Google Summer of Code, we have 5 students working on great features for Godot Engine: DAP backend, pseudolocalization, soft-body improvements, auto-layout in GraphEdit, and a command palette!"><meta property="og:image" content="https://godotengine.org/storage/app/uploads/public/610/43f/11b/61043f11b5388567890116.png"><meta name=twitter:card content="summary_large_image"><meta property="twitter:domain" content="godotengine.org"><meta property="twitter:url" content="https://godotengine.org/article/gsoc-2021-progress-report-1/"><meta property="og:title" content="GSoC 2021 - Progress report #1 – Godot Engine"><title>GSoC 2021 - Progress report #1 – Godot Engine</title>
<link rel=alternate type=application/rss+xml title="Godot News" href=/rss.xml><link rel=alternate type=application/json title="Godot News" href=/rss.json><link rel=alternate type=application/atom+xml title="Godot News" href=/atom.xml><link rel=icon href=/assets/favicon.png sizes=any><link rel=icon href=/assets/favicon.svg type=image/svg+xml><link rel=stylesheet href=/assets/css/main.css?121><link rel=stylesheet href=/assets/css/header.css?3><link rel=stylesheet href=/assets/css/tobii.min.css><link rel=preload as=font href=/assets/fonts/Montserrat-Italic-VariableFont_wght.woff2 crossorigin><link rel=preload as=font href=/assets/fonts/Montserrat-VariableFont_wght.woff2 crossorigin><link rel=me href=https://mastodon.gamedev.place/@godotengine><input type=checkbox id=nav_toggle_cb><header class="flex column"><div class="container flex align-center"><div id=nav_head><a href=/ id=logo-link><img class=nav-logo src=/assets/logo.svg width=136 height=48 alt="Godot Engine">
<img class="nav-logo dark-logo" src=/assets/logo_dark.svg width=136 height=48 alt="Godot Engine"></a><div class=mobile-links><span class="fund mobile"><a href=https://fund.godotengine.org><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="width:13px;fill:#fff;margin-right:4px"><path d="M47.6 300.4 228.3 469.1c7.5 7 17.4 10.9 27.7 10.9s20.2-3.9 27.7-10.9L464.4 300.4c30.4-28.3 47.6-68 47.6-109.5v-5.8c0-69.9-50.5-129.5-119.4-141C347 36.5 300.6 51.4 268 84L256 96 244 84c-32.6-32.6-79-47.5-124.6-39.9C50.5 55.6.0 115.2.0 185.1v5.8c0 41.5 17.2 81.2 47.6 109.5z"/></svg> Donate</a></span>
<label for=nav_toggle_cb id=nav_toggle_btn><img src=/assets/icons/hamburger.svg width=24 height=24 alt="Main menu"></label></div></div><nav id=nav><ul class=left><li><a href=/features/ data-dropdown=features-dropdown>Features</a><li><a href=/showcase/>Showcase</a><li><a href=/blog/>Blog</a><li><a href=/community/>Community</a><li><a href=https://godotengine.org/asset-library/asset>Assets</a><li class=mobile-only><a href=/consoles/>Console support</a></ul><ul class=right><li><a href=/download/windows/ class=set-os-download-url>Download</a><li><a href=https://docs.godotengine.org>Docs</a><li><a href=https://docs.godotengine.org/en/stable/contributing/how_to_contribute.html>Contribute</a><li class="fund desktop"><a href=https://fund.godotengine.org><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="width:13px;fill:#fff;margin-right:4px;top:1px;position:relative"><path d="M47.6 300.4 228.3 469.1c7.5 7 17.4 10.9 27.7 10.9s20.2-3.9 27.7-10.9L464.4 300.4c30.4-28.3 47.6-68 47.6-109.5v-5.8c0-69.9-50.5-129.5-119.4-141C347 36.5 300.6 51.4 268 84L256 96 244 84c-32.6-32.6-79-47.5-124.6-39.9C50.5 55.6.0 115.2.0 185.1v5.8c0 41.5 17.2 81.2 47.6 109.5z"/></svg> Donate</a></ul></nav></div></header><div class=nav-dropdown-menu id=features-dropdown><a href=/features/ class=touch-only>Features</a>
<a href=/consoles/>Console support</a></div><script>document.addEventListener("DOMContentLoaded",function(){const e="ontouchstart"in window||navigator.maxTouchPoints>0,t=document.querySelectorAll("[data-dropdown]");t.forEach(t=>{const i=t.getAttribute("data-dropdown"),n=document.getElementById(i);if(n){let i;function s(){if(window.innerWidth<1200)return;clearTimeout(i);const e=t.getBoundingClientRect();n.style.top=e.bottom+"px",n.style.left=e.left+"px",n.style.display="block",t.classList.add("dropdown-open")}function o(){i=setTimeout(()=>{n.style.display="none",t.classList.remove("dropdown-open")},100)}function a(e){if(window.innerWidth<1200)return;e.preventDefault();const o=n.style.display==="block";o?(n.style.display="none",t.classList.remove("dropdown-open")):s()}e?t.addEventListener("click",a):(t.addEventListener("mouseenter",s),t.addEventListener("mouseleave",o),n.addEventListener("mouseenter",()=>clearTimeout(i)),n.addEventListener("mouseleave",o))}}),e&&document.addEventListener("click",function(e){t.forEach(t=>{const s=t.getAttribute("data-dropdown"),n=document.getElementById(s);n&&!t.contains(e.target)&&!n.contains(e.target)&&(n.style.display="none",t.classList.remove("dropdown-open"))})})})</script><main><style>body{background-color:var(--background-color)}h1{margin-bottom:8px;margin-top:32px}:not(pre)>code{background:var(--code-background-color);padding:1px 4px;font-size:.95em;border-radius:3px}pre{background:var(--codeblock-background-color);color:var(--codeblock-color)}pre code{display:block;overflow-x:auto;padding:.5em}.date-big{line-height:2;margin-left:32px}article{background-color:var(--base-color);box-shadow:0 3px 2px rgba(0,0,0,.15)}figure{margin:0}figure img{margin:0}article img,article video{max-width:100%;height:auto;display:block;margin:auto;margin-top:16px;margin-bottom:16px}article h1{margin-top:64px}article h2,article h3,article h4{margin-top:42px}.article-info{display:flex;flex-direction:column;gap:8px}.article-metadata{display:flex;gap:24px;align-items:center;font-family:var(--header-font-family);margin-bottom:12px}@media(max-width:900px){.article-metadata{flex-direction:column;align-items:flex-start;gap:16px}}.article-author{color:var(--base-color-text-subtitle-date);font-weight:700;font-size:18px;flex-grow:1;display:flex;gap:12px;align-items:center}.article-author .avatar{border-radius:100%;margin:0;background:0 0}.article-author .by{color:var(--base-color-text-subtitle)}.article-metadata .date{color:var(--base-color-text-subtitle-date)}.article-metadata .date.post-recent-highlight{color:var(--post-recent-highlight-color);opacity:.8}.article-metadata .date.post-recent-highlight::after{font-size:80%;content:"NEW";border:2px solid var(--post-recent-highlight-color);padding:2px 3px;margin-left:8px}.tag.active{filter:saturate(.75)}@media screen and (min-width:900px){article .content{width:70%;margin:auto}}@media(max-width:900px){body{background-color:var(--base-color)}article{background-color:initial;box-shadow:none}article img:first-child,article video:first-child{max-width:100%}}.blog-navigation{display:grid;grid-template-columns:1fr 1fr;padding-top:30px;padding-bottom:60px}.blog-navigation .next{text-align:right}@media(max-width:900px){.blog-navigation{grid-template-columns:1fr;gap:20px;border-top:1px solid var(--code-background-color)}.blog-navigation .next{text-align:left}}.blog-navigation span{opacity:.6;font-weight:700;margin-bottom:5px;display:block}.blog-navigation a{display:inline-block;text-decoration:none;color:inherit;opacity:.6;transition:opacity .2s}.blog-navigation a:hover{opacity:1}</style><link rel=stylesheet href=/assets/css/highlight.obsidian.min.css><div class=container><article class=padded><div class="content article-container"><figure class=article-cover><img src=/storage/app/uploads/public/610/43f/11b/61043f11b5388567890116.png title alt=" " class=rounded-lg style=width:100%;height:auto;background-color:initial></figure><div class=article-info><h1>GSoC 2021 - Progress report #1</h1><div class=article-metadata><div class=article-author><span>By: </span><img class=avatar width=25 height=25 src=/assets/images/authors/akien.webp alt="Rémi Verschelde" loading=lazy>
<span class=by>Rémi Verschelde</span></div><span class=date data-post-date="2021-07-30 18:04:05 +0000">30 July 2021</span></div><div class=tags><a href=/blog/progress-report><div class="tag active">Progress Report</div></a></div></div><div class="card card-warning"><p>This article is from <strong>July 2021</strong>, some of its contents might be outdated and no longer accurate.<br>You can find up-to-date information about the engine in the <a href=https://docs.godotengine.org/en/stable/>official documentation</a>.</div><div class=article-body><p>Like in previous years, Godot is participating again in the <a href=https://summerofcode.withgoogle.com/>Google Summer of Code</a> program for its 2021 edition.<p>We selected 5 projects back in May, and the 5 students and their mentors have now been working on their projects for almost two months. We omitted to announce the projects formally (sorry about that!), but this first progress report written by each student will make up for it by giving a direct glimpse into their work.<p>Here are the 5 projects/students with links to the relevant sections in this post:<ul><li><a href=#dap-debugging>Implementing a DAP backend for debugging Godot projects</a> by Ricardo Subtil (<a href=https://github.com/Ev1lbl0w>Ev1lbl0w</a>)<li><a href=#pseudolocalization>Adding pseudolocalization to Godot</a> by Angad Kambli (<a href=https://github.com/angad-k>angad-k</a>)<li><a href=#soft-body>Improvements to Godot’s soft-body dynamics</a> by Jeff Cochran (<a href=https://github.com/jeffrey-cochran>jeffrey-cochran</a>)<li><a href=#graphedit-auto-layout>Automated graph layout in VisualScript & VisualShader editors</a> by Umang Kalra (<a href=https://github.com/theoway>theoway</a>)<li><a href=#command-palette>Command palette for the editor</a> by Bhuvaneshwar (<a href=https://github.com/Bhu1-V>Bhu1-V</a>)</ul><p>They’ve all been doing outstanding work so far, and we’re looking forward to integrating all those changes in the engine.<hr><p><a id=dap-debugging></a><h2 id=implementing-a-dap-backend-for-debugging-godot-projects>Implementing a DAP backend for debugging Godot projects</h2><ul><li>Project: Implementing a <abbr title="Debug Adapter Protocol">DAP</abbr> backend for debugging Godot projects<li>Student: Ricardo Subtil (<a href=https://github.com/Ev1lbl0w>Ev1lbl0w</a>)<li>Mentors: Fabio Alessandrelli (<a href=https://github.com/Faless>Faless</a>) and Joan Fons (<a href=https://github.com/jfons>jfons</a>)<li>Branch: <a href=https://github.com/Ev1lbl0w/godot/tree/gsoc21-dap><code class="language-plaintext highlighter-rouge">Ev1lbl0w/gsoc21-dap</code></a><li>PR: <a href=https://github.com/godotengine/godot/pull/50454>#50454</a></ul><h3 id=introduction>Introduction</h3><p>A lot of developers prefer to use their familiar tools when it comes to writing and debugging code. Before, this was an <kbd>Alt</kbd>+<kbd>Tab</kbd> experience where developers had to constantly switch between Godot and their external text editor, which was very distracting and cumbersome. With the implementation of <strong>LSP</strong> <em>(Language Server Protocol)</em>, Godot now communicates with the text editor to provide code completion, symbol lookup, and documentation right at your fingertips, greatly improving the workflow.<p>For debugging projects, Microsoft also developed a similar protocol, the <strong>DAP</strong> <em>(Debug Adapter Protocol)</em>, that allows debugging projects from the comfort of your tools as well. My task is to adapt Godot to support this communication protocol, thus further improving the experience for developers working with their “native” tools.<h3 id=current-progress>Current progress</h3><p>Most of the basic commands defined in the <a href=https://microsoft.github.io/debug-adapter-protocol/specification>DAP specification</a> have been implemented (<a href=https://github.com/godotengine/godot/pull/50454>#50454</a>):<ul><li>Launching a <em>debuggee</em> (the application we debug) from the text editor, and terminating it (<code class="language-plaintext highlighter-rouge">launch/terminate</code>).<li>Pausing and continuing the debuggee (<code class="language-plaintext highlighter-rouge">pause/continue</code>).<li>Stepping the code, and stepping in function calls (<code class="language-plaintext highlighter-rouge">next/stepIn</code>).<li>Setting breakpoints (<code class="language-plaintext highlighter-rouge">setBreakpoints</code>).<li>Exceptions from bad code, such as syntax or runtime errors.<li>Stacktrace and scope information, along with variable values (<code class="language-plaintext highlighter-rouge">stackTrace/scopes/variables</code>).</ul><p>With these, you can already start debugging projects with your text editor of choice. Since <strong>DAP</strong> is a platform-agnostic protocol, it also shouldn’t require any custom plugins or anything of the sort; just point your compatible editor to the right port <em>(<code class="language-plaintext highlighter-rouge">6009</code> by default)</em>, and you’re good to go!<p>For VSCode, here’s a <code class="language-plaintext highlighter-rouge">launch.json</code> config I’m using for debugging my work <em>(needs <a href=https://github.com/godotengine/godot-vscode-plugin>godot-vscode-plugin</a> installed as well)</em>:<div class="language-json highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=p>{</span><span class=w>
	</span><span class=nl>"version"</span><span class=p>:</span><span class=w> </span><span class=s2>"0.2.0"</span><span class=p>,</span><span class=w>
	</span><span class=nl>"configurations"</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=w>
		</span><span class=p>{</span><span class=w>
			</span><span class=nl>"name"</span><span class=p>:</span><span class=w> </span><span class=s2>"Debug (DAP)"</span><span class=p>,</span><span class=w>
			</span><span class=nl>"type"</span><span class=p>:</span><span class=w> </span><span class=s2>"godot"</span><span class=p>,</span><span class=w>
			</span><span class=nl>"request"</span><span class=p>:</span><span class=w> </span><span class=s2>"launch"</span><span class=p>,</span><span class=w>
			</span><span class=nl>"project"</span><span class=p>:</span><span class=w> </span><span class=s2>"${workspaceFolder}"</span><span class=p>,</span><span class=w>
			</span><span class=nl>"port"</span><span class=p>:</span><span class=w> </span><span class=mi>6007</span><span class=p>,</span><span class=w>
			</span><span class=nl>"debugServer"</span><span class=p>:</span><span class=w> </span><span class=mi>6009</span><span class=p>,</span><span class=w>	</span><span class=err>//</span><span class=w> </span><span class=err>DAP</span><span class=w> </span><span class=err>port;</span><span class=w> </span><span class=err>if</span><span class=w> </span><span class=err>you</span><span class=w> </span><span class=err>change</span><span class=w> </span><span class=err>this</span><span class=w> </span><span class=err>in</span><span class=w> </span><span class=err>Godot</span><span class=w> </span><span class=err>settings</span><span class=p>,</span><span class=w> </span><span class=err>you</span><span class=w> </span><span class=err>must</span><span class=w> </span><span class=err>change</span><span class=w> </span><span class=err>this</span><span class=w> </span><span class=err>one</span><span class=w> </span><span class=err>as</span><span class=w> </span><span class=err>well</span><span class=w>
			</span><span class=nl>"address"</span><span class=p>:</span><span class=w> </span><span class=s2>"local://127.0.0.1"</span><span class=w>
		</span><span class=p>}</span><span class=w>
	</span><span class=p>]</span><span class=w>
</span><span class=p>}</span><span class=w>
</span></code></pre></div></div><p><img src=/storage/app/media/gsoc/2021-1/dap-demo.gif alt="Demonstration of debugging a Godot project from VSCode"><p>Implementation-wise, building the backend was sometimes simple, sometimes challenging, but overall a very rewarding experience, as this is my first time contributing features to the Godot Engine, and not just occasional bugfixing. Since both these protocols were developed by Microsoft, a few things are very similar, so I was able to jump start my code from the <strong>LSP</strong> implementation.<p>A lot of requests are very simple: parse any arguments there might be, call a few functions, and return a response packet. In that aspect, the challenge was mostly figuring out how the engine works under the hood, and finding the right methods to call. Interestingly, a lot of those methods are callbacks for UI elements; thus, the behavior from DAP should be very similar, if not exactly the same as clicking on those UI elements.<p>For reporting stacktrace and variable information, the <strong>DAP</strong> uses an ID system for all of these: each stacktrace has an ID, each scope another ID, each variable has one unique ID too, etc… Since Godot doesn’t have anything of the sort, I have to then create a separate list of this information, and transform it into something <strong>DAP</strong> can both query and understand. From my tests so far, the system is working fine, but still needs more work for better displaying complex objects <em>(for example, showing the XYZ values of a Vector3, elements inside an Array, RGB values of a Color, etc…)</em>.<p>For testing the protocol implementation, I’ve been using VSCode. Since this text editor is basically the reference implementation of how <strong>LSP</strong> and <strong>DAP</strong> communicate, I’m hopeful it will work well on other text editors.<p>Alongside it, I found out <a href=https://www.wireshark.org/>Wireshark</a> <em>(a FOSS tool for analyzing network communications)</em> to be extremely useful for seeing the raw communication between Godot and VSCode, allowing me to read by hand if the packets sent are according to the spec, as well as helping me debug issues between communication:<p><img src=/storage/app/media/gsoc/2021-1/dap-wireshark.png alt="Wireshark view of a communicate between Godot and VSCode"><h3 id=next-steps>Next steps</h3><p>Now that most of the necessary functionalities are implemented, the remaining “checklist” will focus on finishing up details:<ul><li>Implementing a few more requests/events that Godot can support, as well as allowing Godot specific actions <em>(e.g. getting the live scene tree)</em>.<li>Polishing and syncing interactions between the Godot editor and the text editor.<li>Bugfixing and testing under more projects, more text editors, more platforms, etc…</ul><p><a id=pseudolocalization></a><h2 id=adding-pseudolocalization-to-godot>Adding pseudolocalization to Godot</h2><ul><li>Project: Adding pseudolocalization to Godot<li>Student: Angad Kambli (<a href=https://github.com/angad-k>angad-k</a>)<li>Mentors: Rémi Verschelde (<a href=https://github.com/akien-mga>Akien</a>), Michael Alexsander (<a href=https://github.com/YeldhamDev>Yeldham</a>)<li>Branch: <a href=https://github.com/angad-k/godot/tree/pseudolocalization><code class="language-plaintext highlighter-rouge">angad-k/pseudolocalization</code></a><li>PR: <a href=https://github.com/godotengine/godot/pull/49361>#49361</a></ul><h3 id=introduction-and-project-overview>Introduction and project overview</h3><p>Hey there! I am Angad Kambli, a <abbr title="Computer Science & Engineering">CSE</abbr> undergrad at IIT Roorkee. I have been working on adding pseudolocalization to Godot as a part of Google Summer Of Code ‘21. Before getting into what pseudolocalization is, let me show you what pseudolocalizing a piece of text looks like.<p>Input:<blockquote><p>The quick brown fox jumped over the lazy dog.</blockquote><p>Output:<blockquote><p>[Ŧh̀éé q́üüííćḱ ḅŕôôŵή f́ôôx́ ǰüüm̀ṕééd́ ôôṽééŕ ŧh̀éé łááźý d́ôôǵ.]</blockquote><p>So, what does this achieve? How would transforming text into this cursed looking output be beneficial?<p>Well, this is pretty useful in improving the internationalization workflow for big projects. For projects catering to people from various backgrounds, supporting multiple languages might be important, and with that, comes the need for the project to be robust enough to not break when using different locales.<p>Now, translations for the project might not be available during development leading to problems in internationalization not being detected until very late. This is where pseudolocalization comes in: it simulates localization so that the project’s robustness when it comes to changes in locale can be checked regularly during development and any problem regarding that can be detected early on. In the next section, I’ll list out some of the features I am including as part of pseudolocalization and their benefits.<h3 id=features>Features</h3><p>Following are the options that can be set through both the project settings and GDScript. These options can be toggled separately and can be configured as per the needs of the project.<ul><li><strong>Accents</strong>: Replacing the normal character with accented variants helps in simulating the various characters that might be introduced during localization and also helps to check whether the selected font can support such special characters.<li><strong>Text Expansion</strong>: The text might expand during localization and to simulate that, I have included two options, one is to simply double the vowels and that sufficiently simulates text expansion. The other option is to expand the keys by a given percentage using underscores.<li><strong>Fake Bidi</strong>: Some writing systems like the Arabic script use a Right-To-Left system. This can be simulated by forcing RTL text by wrapping the text in some <a href=https://www.w3.org/International/questions/qa-bidi-unicode-controls.en>specific Unicode characters</a>, to support bi-directional text.<li><strong>Override</strong>: Now, turning on pseudolocalization and going through the project can already help you find strings that are untranslatable. However, the override option, when enabled, replaces every character in translatable strings with a ‘*’ thus making it very easy to find strings that are <strong>not</strong> getting localized.<li><strong>Skipping placeholders</strong>: People might want to know places where, due to insufficient arguments, placeholders like <code class="language-plaintext highlighter-rouge">%s</code> are being rendered without being replaced. This option enables them to skip pseudolocalizing string formatting placeholders like <code class="language-plaintext highlighter-rouge">%s</code>.<li><strong>Prefix and suffix</strong>: Strings are wrapped in a prefix (default: <code class="language-plaintext highlighter-rouge">[</code>) and suffix (default: <code class="language-plaintext highlighter-rouge">]</code>) to clearly see where a key starts and ends. This is important to see if any keys are getting wrongly clubbed together.</ul><h3 id=the-demo-project>The demo project</h3><p>For testing purposes, I have set up a <a href=https://github.com/angad-k/Pseudolocalization-Demo>demo project</a> which can also work as a project for someone who wishes to try out all pseudolocalization features, much like <a href=https://godotengine.org/asset-library/asset/134>this project for internationalization</a>. Here are few screenshots from the project that also showcase pseudolocalization in action:<p>Pseudolocalization disabled:<p><img src=/storage/app/media/gsoc/2021-1/pseudoloc-disabled.png alt="Pseudolocalization disabled"><p>Accents and double vowels enabled:<p><img src=/storage/app/media/gsoc/2021-1/pseudoloc-accents_double_vowels.png alt="Accents and double vowels"><p>Fake Bidi enabled:<p><img src=/storage/app/media/gsoc/2021-1/pseudoloc-fakebidi.png alt="Fake Bidi"><p>Expansion ratio set to 0.3:<p><img src=/storage/app/media/gsoc/2021-1/pseudoloc-expansion30.png alt="Expansion Ratio set to 0.3"><p>Override enabled. Notice how the “%s” is skipped:<p><img src=/storage/app/media/gsoc/2021-1/pseudoloc-override.png alt="Override enabled"><h3 id=current-progress-1>Current progress</h3><p>I am pretty much done with the main pseudolocalization flow. All the options are implemented and they can be toggled through both project settings and GDScript. I also added an option in the Editor Settings to enable pseudolocalization in the editor, which can be useful for Godot translation contributors. I’m now working on the documentation and including the demo project in the official demos. After that the project should be complete!<h3 id=further-reading>Further reading</h3><p>If you are interested reading up more on pseudolocalization, here are a few links I found helpful while researching for it:<ul><li>This <a href=https://opensource.googleblog.com/2011/06/pseudolocalization-to-catch-i18n-errors.html>Google Open Source article</a> pretty much covers everything about pseudolocalization and its use cases.<li>This <a href=https://netflixtechblog.com/pseudo-localization-netflix-12fff76fbcbe>Netflix article</a> is a pretty interesting read on how pseudolocalization is employed in an actual development setting.</ul><p>And that’s it! Thanks for reading.<p><a id=soft-body></a><h2 id=improvements-to-godots-soft-body-dynamics>Improvements to Godot’s soft-body dynamics</h2><ul><li>Project: Improvements to Godot’s soft-body dynamics<li>Student: Jeff Cochran (<a href=https://github.com/jeffrey-cochran>jeffrey-cochran</a>)<li>Mentor: Camille Mohr-Daurat (<a href=https://github.com/pouleyKetchoupp>pouleyKetchoupp</a>)<li>Branch: <a href=https://github.com/jeffrey-cochran/godot/tree/softbody-areas><code class="language-plaintext highlighter-rouge">jeffrey-cochran/softbody-areas</code></a><li>PR: <a href=https://github.com/godotengine/godot/pull/50785>#50785</a></ul><h3 id=project-description-synopsis>Project description (Synopsis)</h3><p>Deformation is one of the most ubiquitous and recognizable physical phenomena: trees swaying in the breeze, a bouncing ball, someone poking the Pillsbury doughboy. This familiar behavior can make all the difference to an immersive gaming experience. Simulating this behavior in real-time often falls within the domain of soft-body dynamics, for which Godot provides support in 3D.<p>After discussion with Camille Mohr-Daurat (<a href=https://github.com/pouleyKetchoupp>pouleyKetchoupp</a>), I have decided to focus my attention on two specific, feasible tasks that would improve soft-body dynamics in Godot:<ol><li><a href=https://github.com/godotengine/godot/issues/36693>[Issue #36693]</a> Enable area detection and the application of custom gravity for soft bodies.<li><a href=https://github.com/godotengine/godot-proposals/issues/2591>[Proposal #2591]</a> Enable the application of wind-like forces to soft bodies.</ol><p>The first task will resolve a discrepancy between those features offered for rigid bodies and those offered for soft bodies. Currently, one can override the gravity vector in an area occupied by a rigid body and see it faithfully applied to the rigid body. This fails for soft bodies, which ignore the change in gravity.<p>The second task will introduce a new object for the simulation of wind. The jet-force object will allow one to specify, much as one might for a camera, a location (origin) and direction of the jet. Additional parameters include jet strength and jet attenuation, which describes how the force decays with distance.<p>These two tasks are interrelated in that they both focus on the application of forces (body and external) to soft bodies, and I hope that their completion will illuminate a more general pattern by which this is best accomplished for future soft body improvements.<h3 id=overview-and-progress>Overview and progress</h3><p>The first thing I’ve done is create a simple scene for use as a test case. The scene has a single soft body cloth with a coarse mesh that is fixed along one edge. Global gravity is applied in the negative Y direction, and an area is created encapsulating the cloth to allow for the specification of a new gravity vector that overrides the global gravity, instead acting in the positive Y direction.<p>To correctly apply the new gravity vector, the narrow phase collision detection routine in Godot must be modified to account for soft body / area intersection and to send notifications when this occurs. Then the motion prediction for soft bodies must be modified to account for all areas affecting it.<p>I have completed these tasks, and the result is a cloth that falls upward despite a downward global gravity:<p><img src=/storage/app/media/gsoc/2021-1/softbody-gravity.gif alt="Upward falling cloth with gravity override"><p>The PR for this improvement can be found at <a href=https://github.com/godotengine/godot/pull/50785>this link</a>.<h3 id=whats-next>What’s next</h3><p>Next I’ll complete the addition of a new wind-like force. The implementation will, as a first pass, use areas in much the same way that modified gravity does. The primary difference will be the force model, which requires a variety of different parameters. The end result will look like this simulation I’ve created here: <a href="https://www.youtube.com/watch?v=K1BB1jk034o">Wind-like Force Simulation</a>.<p><a id=graphedit-auto-layout></a><h2 id=automated-graph-layout-in-visualscript--visualshader-editors>Automated graph layout in VisualScript & VisualShader editors</h2><ul><li>Project: Auto-arrangement of nodes in GraphEdit, VisualScript and VisualShaders<li>Student: Umang Kalra (<a href=https://github.com/theoway>theoway</a>)<li>Mentor: Ernest Lee (<a href=https://github.com/fire>iFire</a>)<li>Branch: <a href=https://github.com/theoway/godot/tree/node_auto_arrangement_graph_edit><code class="language-plaintext highlighter-rouge">theoway/node_auto_arrangement_graph_edit</code></a><li>PR: <a href=https://github.com/godotengine/godot/pull/49343>#49343</a><li>Proposal: <a href=https://github.com/godotengine/godot-proposals/issues/1253>godot-proposals#1253</a></ul><h3 id=introduction-1>Introduction</h3><p>Godot provides a lot of tools for game and graphic designers that can get the job done without worrying about coding! Two such powerful features are <strong>VisualScript</strong> & <strong>VisualShaders</strong>. The users can automate and customize scenes and write shaders according to their needs, using a graph-based visual editor.<p>Nonetheless, at some point everyone has experienced the overall layout of their script/shader graph getting very complicated and hard to manage. As more functionality is added by the user, the resulting canvas(es) gets filled by nodes and connections, making it hard to keep track of things. This project aims to add a feature that automatically organizes the position of nodes in the VisualShader & VisualScript editors or any other module built on top of <strong>GraphEdit</strong>.<h3 id=project-overview--current-progress>Project overview & current progress</h3><p>Arranging nodes in a graph is a complex problem, both in terms of computation and achieving a user-friendly layout. Many methodologies have been formed over time, but the most popular choice for building a graph layout has been <a href=https://en.wikipedia.org/wiki/Layered_graph_drawing>Sugiyama’s methodology</a>. This project is correspondingly based on this methodology. Since the VisualScript & VisualShader editors are both based on <code class="language-plaintext highlighter-rouge">GraphEdit</code>, this feature has been implemented in the core <code class="language-plaintext highlighter-rouge">GraphEdit</code> node. To accommodate Godot’s default <code class="language-plaintext highlighter-rouge">GraphNode</code> features, such as variable sizes of nodes along 2 dimensions, having multiple input/output ports, etc., various changes have been made to this methodology. The purpose of having this feature is to give users the flexibility to auto-arrange the nodes in a layout with organized node groups, having minimum tangles in connections (edge-crossings!). The algorithm is designed to work well on large graphs and give a layout that has been scaled according to the <code class="language-plaintext highlighter-rouge">zoom</code> set by users in their graph editors.<p>After discussing with the users, I’ve made some design changes in the draft PR. Only the nodes selected by the user are rearranged. A keyboard shortcut has been added to the VisualScript editor, and an option has been added in the menu of the VisualShader editor, which will call this feature and work on the selected nodes. Currently, the code is able to produce a layout with horizontal grouping of nodes such that all the connections inside the horizontal block are drawn straight. These horizontal blocks are then compressed vertically to get a compact layout. Also, undo/redo functionality has been enabled which uses the undo/redo stack of the VisualShader or VisualScript editor respectively. Here’s a short demo of the feature:</p><video title="Demonstration of auto-arrangement of nodes in VisualScript" controls>
<source src=/storage/app/media/gsoc/2021-1/graphedit-auto-layout-demo.mp4 type=video/mp4></video><h3 id=whats-next-1>What’s next</h3><p>The next goal is to make the whole layout compact and getting rid of overlaps that occur between nodes in the same block. After testing it out on large graphs in both the VisualScript and VisualShader editors, and merging the feature in <code class="language-plaintext highlighter-rouge">master</code>, I’ll be adding the functionality to bind the nodes together in a <em>comment node</em>, so that when a comment node is moved, the nodes enclosed by it should also move with it intuitively, which is something currently missing in Godot.<p>Also, making this functionality work with the node auto-arrangement feature is on my to-do list. So, you can expect quite a few features coming up in the VisualScript and VisualShader editors.<p><a id=command-palette></a><h2 id=command-palette-for-the-editor>Command palette for the editor</h2><ul><li>Project: Command palette for the editor<li>Student: Bhuvaneshwar (<a href=https://github.com/Bhu1-V>Bhu1-V</a>)<li>Mentors: Gilles Roudière (<a href=https://github.com/groud>groud</a>), Hugo Locurcio (<a href=https://github.com/Calinou>Calinou</a>), Tomasz Chabora (<a href=https://github.com/KoBeWi>KoBeWi</a>)<li>PR: <a href=https://github.com/godotengine/godot/pull/49417>#49417</a></ul><h3 id=introduction-2>Introduction</h3><p>The <strong>Command Palette</strong> provides a quick way to access commands that don’t have a key binding or would usually be hidden away in a menu.<p>Features commonly found in command palettes:<ul><li>A single shortcut to invoke the palette.<li>A fuzzy matcher to find commands.<li>A way to see the direct shortcuts for next time.</ul><h3 id=current-progress-2>Current progress</h3><p>My initial proposal was to build upon the draft PR <a href=https://github.com/godotengine/godot/pull/47002>Add an editor actions API #47002</a> and use it to register command palette commands, which are searchable and executable from a command palette dialog. But after some discussion with my mentors we decided to use a new <code class="language-plaintext highlighter-rouge">InputEventShortcut</code>, which inherits <code class="language-plaintext highlighter-rouge">InputEvent</code> and would hold a reference to a <code class="language-plaintext highlighter-rouge">Shortcut</code>, i.e. a mapping between a keyboard input and a function.<p>So the idea is to register editor actions by creating an <code class="language-plaintext highlighter-rouge">InputEventShortcut</code> object for all the necessary actions and create a callable for the function <code class="language-plaintext highlighter-rouge">Viewport::unhandled_input()</code> and pass the created <code class="language-plaintext highlighter-rouge">InputEventShortcut</code> object as the argument. All these callables (commands) are stored in a HashMap with their <code class="language-plaintext highlighter-rouge">shortcut_path</code> as key. The <code class="language-plaintext highlighter-rouge">Viewport::unhandled_input()</code> function has also been edited to handle <code class="language-plaintext highlighter-rouge">InputEventShortcut</code> as an argument. I added a new function <code class="language-plaintext highlighter-rouge">ED_SHORTCUT_AND_COMMAND</code> which will create a new shortcut and register it as mentioned above.<p>For the frontend I inherited a <code class="language-plaintext highlighter-rouge">ConfirmationDialog</code> that has a <code class="language-plaintext highlighter-rouge">LineEdit</code> to search for commands and a <code class="language-plaintext highlighter-rouge">Tree</code> to show the search results. Each <code class="language-plaintext highlighter-rouge">TreeItem</code> (row/search result) has two columns which contain a command name and its shortcut if it’s bound to one. We can navigate the search results with arrow keys, execute the command with the <kbd>Return</kbd> key and exit the palette with <kbd>Esc</kbd>.<h3 id=result>Result</h3><p><img src=/storage/app/media/gsoc/2021-1/command-palette-demo.gif alt="Demonstration of the command palette"><h3 id=coming-up-next>Coming up next</h3><ul><li>Add more commands.<li>Add plugin support.<li>Make command palette to open scenes and scripts (Quick Open).</ul><hr><p>That’s it for this progress report! You’ll hear more about each project once they’re finished at the end of August.<p>A big thankyou to all students for their quality work and creative ideas to implement or improve those features in Godot, and thanks to all the mentors who support them!</div></div></article><div class=blog-navigation><div class=previous><span>Previous</span>
<a rel=prev href=/article/dev-snapshot-godot-3-4-beta-2/>Dev snapshot: Godot 3.4 beta 2</a></div><div class=next><span>Next</span>
<a rel=next href=/article/release-candidate-godot-3-3-3-rc-1/>Release candidate: Godot 3.3.3 RC 1</a></div></div></div><link rel=stylesheet href=/assets/css/anchor-link.css?1><link rel=stylesheet href=/assets/css/article-cards.css?3><script src=/assets/js/anchor-link.js></script><script>document.addEventListener("DOMContentLoaded",()=>{window.applyAnchorLinks(".article-body"),document.querySelectorAll(".article-cover img, .article-body img").forEach(e=>{if(e.classList.contains("lightbox-ignore"))return;const t=document.createElement("a");t.href=e.src,t.classList.add("lightbox"),t.dataset.group="article",e.parentNode.appendChild(t),t.appendChild(e)})})</script></main><footer class=footer-global><div class=wrapper><div class=columns><div class=col><h2>Godot Engine</h2><ul><li><a class=set-os-download-url href=/download>Download</a><li><a href=https://docs.godotengine.org>Documentation</a><li><a href=/features/>Features</a><li><a href=https://editor.godotengine.org/releases/latest/>Web editor</a><li><a href=/download/archive/>Release archive</a><li><a href=https://github.com/godotengine>Source code</a></ul></div><div class=col><h2>Project</h2><ul><li><a href=/blog/>Blog</a><li><a href=/code-of-conduct/>Code of conduct</a><li><a href=/governance/>Governance</a><li><a href=/teams/>Teams</a><li><a href=/priorities/>Priorities</a><li><a href=/community/>Communities</a></ul></div><div class=col><h2>Resources</h2><ul><li><a href=https://godotengine.org/asset-library/asset>Asset library</a><li><a href=/press/>Press kit</a><li><a href=/showcase/>Showcase</a><li><a href=/education/>Education</a><li><a href=/consoles/>Console support</a></ul></div><div class=col><h2>Foundation</h2><ul><li><a href=https://godot.foundation/>About</a><li><a href=https://fund.godotengine.org>Donate</a><li><a href=/license/>License</a><li><a href=/privacy-policy/>Privacy policy</a><li><a href=/contact/>Contact us</a></ul></div></div><hr><div class=credits-and-socials><p>© 2007-2025 Juan Linietsky, Ariel Manzur and <a href=https://github.com/godotengine/godot/blob/master/AUTHORS.md target=_blank rel=noopener>contributors</a>. Hosted by the <a href=https://godot.foundation/ target=_blank rel=noopener>Godot Foundation</a>. Website <a href=https://github.com/godotengine/godot-website target=_blank rel=noopener>source code on GitHub</a>.<div class=social><a href=https://github.com/godotengine target=_blank rel=noopener title=GitHub><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
</a><a href=https://bsky.app/profile/godotengine.org target=_blank rel=noopener title=Bluesky><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M407.8 294.7c-3.3-.4-6.7-.8-10-1.3 3.4.4 6.7.9 10 1.3zM288 227.1C261.9 176.4 190.9 81.9 124.9 35.3 61.6-9.4 37.5-1.7 21.6 5.5 3.3 13.8.0 41.9.0 58.4S9.1 194 15 213.9c19.5 65.7 89.1 87.9 153.2 80.7 3.3-.5 6.6-.9 10-1.4-3.3.5-6.6 1-10 1.4-93.9 14-177.3 48.2-67.9 169.9C220.6 589.1 265.1 437.8 288 361.1c22.9 76.7 49.2 222.5 185.6 103.4 102.4-103.4 28.1-156-65.8-169.9-3.3-.4-6.7-.8-10-1.3 3.4.4 6.7.9 10 1.3 64.1 7.1 133.6-15.1 153.2-80.7C566.9 194 576 75 576 58.4s-3.3-44.7-21.6-52.9c-15.8-7.1-40-14.9-103.2 29.8C385.1 81.9 314.1 176.4 288 227.1z"/></svg>
</a><a href=https://mastodon.gamedev.place/@godotengine target=_blank rel=noopener title=Mastodon><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M433 179.1c0-97.2-63.7-125.7-63.7-125.7-62.5-28.7-228.6-28.4-290.5.0.0.0-63.7 28.5-63.7 125.7.0 115.7-6.6 259.4 105.6 289.1 40.5 10.7 75.3 13 103.3 11.4 50.8-2.8 79.3-18.1 79.3-18.1l-1.7-36.9s-36.3 11.4-77.1 10.1c-40.4-1.4-83-4.4-89.6-54a102.5 102.5.0 01-.9-13.9c85.6 20.9 158.7 9.1 178.8 6.7 56.1-6.7 105-41.3 111.2-72.9 9.8-49.8 9-121.5 9-121.5zm-75.1 125.2h-46.6V190.1c0-49.7-64-51.6-64 6.9v62.5H201V197c0-58.5-64-56.6-64-6.9v114.2H90.2c0-122.1-5.2-147.9 18.4-175 25.9-28.9 79.8-30.8 103.8 6.1l11.6 19.5 11.6-19.5c24.1-37.1 78.1-34.8 103.8-6.1 23.7 27.3 18.4 53 18.4 175z"/></svg>
</a><a href=https://discord.gg/godotengine target=_blank rel=noopener title=Discord><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path d="M524.5 69.8a1.5 1.5.0 00-.8-.7A485.1 485.1.0 00404.1 32a1.8 1.8.0 00-1.9.9 337.5 337.5.0 00-14.9 30.6 447.8 447.8.0 00-134.4.0 309.5 309.5.0 00-15.1-30.6 1.9 1.9.0 00-1.9-.9A483.7 483.7.0 00116.1 69.1a1.7 1.7.0 00-.8.7C39.1 183.7 18.2 294.7 28.4 404.4a2 2 0 00.8 1.4A487.7 487.7.0 00176 479.9a1.9 1.9.0 002.1-.7 348.2 348.2.0 0030-48.8 1.9 1.9.0 00-1-2.6 321.2 321.2.0 01-45.9-21.9 1.9 1.9.0 01-.2-3.1c3.1-2.3 6.2-4.7 9.1-7.1a1.8 1.8.0 011.9-.3c96.2 43.9 200.4 43.9 295.5.0a1.8 1.8.0 011.9.2c2.9 2.4 6 4.9 9.1 7.2a1.9 1.9.0 01-.2 3.1 301.4 301.4.0 01-45.9 21.8 1.9 1.9.0 00-1 2.6 391.1 391.1.0 0030 48.8 1.9 1.9.0 002.1.7 486 486 0 00147.2-74.1 1.9 1.9.0 00.8-1.4c12.2-126.7-20.6-236.8-87-334.5zm-302 267.8c-29 0-52.8-26.6-52.8-59.2s23.4-59.3 52.8-59.3c29.7.0 53.3 26.8 52.8 59.2.0 32.7-23.4 59.3-52.8 59.3zm195.4.0c-29 0-52.8-26.6-52.8-59.2s23.3-59.3 52.8-59.3c29.7.0 53.3 26.8 52.8 59.2.0 32.7-23.2 59.3-52.8 59.3z"/></svg>
</a><a href=https://www.reddit.com/r/godot title=Reddit target=_blank rel=noopener><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M0 256C0 114.6 114.6.0 256 0S512 114.6 512 256 397.4 512 256 512H37.1c-13.7.0-20.5-16.5-10.9-26.2L75 437C28.7 390.7.0 326.7.0 256zM349.6 153.6c23.6.0 42.7-19.1 42.7-42.7s-19.1-42.7-42.7-42.7c-20.6.0-37.8 14.6-41.8 34-34.5 3.7-61.4 33-61.4 68.4v.2c-37.5 1.6-71.8 12.3-99 29.1-10.1-7.8-22.8-12.5-36.5-12.5-33 0-59.8 26.8-59.8 59.8.0 24 14.1 44.6 34.4 54.1 2 69.4 77.6 125.2 170.6 125.2s168.7-55.9 170.6-125.3c20.2-9.6 34.1-30.2 34.1-54 0-33-26.8-59.8-59.8-59.8-13.7.0-26.3 4.6-36.4 12.4-27.4-17-62.1-27.7-1e2-29.1v-.2c0-25.4 18.9-46.5 43.4-49.9 4.4 18.8 21.3 32.8 41.5 32.8zM177.1 246.9c16.7.0 29.5 17.6 28.5 39.3s-13.5 29.6-30.3 29.6-31.4-8.8-30.4-30.5S160.3 247 177 247zm190.1 38.3c1 21.7-13.7 30.5-30.4 30.5s-29.3-7.9-30.3-29.6c-1-21.7 11.8-39.3 28.5-39.3s31.2 16.6 32.1 38.3zm-48.1 56.7c-10.3 24.6-34.6 41.9-63 41.9s-52.7-17.3-63-41.9c-1.2-2.9.8-6.2 3.9-6.5 18.4-1.9 38.3-2.9 59.1-2.9s40.7 1 59.1 2.9c3.1.3 5.1 3.6 3.9 6.5z"/></svg>
</a><a href=/rss.xml title=RSS target=_blank rel=noopener><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M64 32C28.7 32 0 60.7.0 96V416c0 35.3 28.7 64 64 64h320c35.3.0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64zM96 136c0-13.3 10.7-24 24-24 137 0 248 111 248 248 0 13.3-10.7 24-24 24s-24-10.7-24-24c0-110.5-89.5-2e2-2e2-2e2-13.3.0-24-10.7-24-24zm0 96c0-13.3 10.7-24 24-24 83.9.0 152 68.1 152 152 0 13.3-10.7 24-24 24s-24-10.7-24-24c0-57.4-46.6-104-104-104-13.3.0-24-10.7-24-24zm0 120a32 32 0 1164 0 32 32 0 11-64 0z"/></svg></a></div></div></div></footer><script defer src=/assets/js/localize.js?6></script><script defer src=/assets/js/tobii.min.js></script><script defer src=/assets/js/highlight.min.js?1></script><script defer src=/assets/js/highlight.gdscript.min.js?1></script><script>document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll("pre code").forEach(e=>{hljs.highlightBlock(e)}),document.querySelectorAll("[data-post-date]").forEach(e=>{Date.parse(e.dataset.postDate)>Date.now()-1e3*60*60*48&&e.classList.add("post-recent-highlight")}),new Tobii({zoom:!1});const e=document.querySelectorAll(".set-os-download-url");for(let n=0;n<e.length;n++){const s=e[n];let o="download";"version"in s.dataset&&s.dataset.version==="3"&&(o="download/3.x");let t="windows";navigator.platform.indexOf("Mac")!==-1?t="macos":navigator.userAgent.indexOf("Android")!==-1?t="android":navigator.platform.indexOf("Linux")!==-1&&(t="linux"),s.href=`/${o}/${t}/`}})</script>