<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="author" content="Godot Engine">
	<meta name="description" content="June 2021 update of the recent work done in relation to XR support in Godot.">
	<meta name="theme-color" content="#3d8fcc">
	<meta property="og:site_name" content="Godot Engine">
	<meta property="og:url" content="https://godotengine.org/article/godot-xr-progress-update-june-2021/">
	<meta name="twitter:site" content="@godotengine">

	<meta property="og:title" content="Godot XR progress update June 2021">
	<meta property="og:description" content="June 2021 update of the recent work done in relation to XR support in Godot.">
	<meta property="og:image" content="https://godotengine.org/storage/app/uploads/public/60e/169/1fa/60e1691fab28c135981956.jpg">
	<meta property="og:type" content="article">
	<meta name="twitter:card" content="summary_large_image">
	<title>Godot XR progress update June 2021</title>

	<link rel="alternate" type="application/rss+xml" title="Godot News" href="/rss.xml">
	<link rel="icon" href="/assets/favicon.png" sizes="any">
	<link rel="icon" href="/assets/favicon.svg" type="image/svg+xml">
	<link rel="stylesheet" href="/assets/css/main.css?111">
	<link rel="stylesheet" href="/assets/css/tobii.min.css">
	<link rel="preload" as="font" href="/assets/fonts/Montserrat-Bold.woff2" crossorigin>
	<link rel="preload" as="font" href="/assets/fonts/Montserrat-ExtraBold.woff2" crossorigin>
	<link rel="me" href="https://mastodon.gamedev.place/@godotengine">
</head>

<body>
	<input type="checkbox" id="nav_toggle_cb">
<header>
	<div class="container flex align-center">
		<div id="nav_head">
			<a href="/" id="logo-link">
				<img class="nav-logo" src="/assets/logo.svg" width="136" height="48" alt="Godot Engine">
				<img class="nav-logo dark-logo" src="/assets/logo_dark.svg" width="136" height="48" alt="Godot Engine">
			</a>
			<label for="nav_toggle_cb" id="nav_toggle_btn">
				<img src="/assets/icons/hamburger.svg" width="24" height="24" alt="Main menu">
			</label>
		</div>

		<nav id="nav">
			<ul class="left">
				<li><a href="/features">Features</a></li>
				<li class="only-on-mobile"><a href="/showcase">Showcase</a></li>
				<li><a href="/blog">Blog</a></li>
				<li><a href="/community">Community</a></li>
				<li><a href="/contact">About</a></li>
				<li><a href="https://godotengine.org/asset-library/asset">Assets</a></li>
			</ul>

			<ul class="right">
				<li><a href="/download/windows" class="set-os-download-url">Download</a></li>
				<li><a href="https://docs.godotengine.org">Learn</a></li>
				<li><a href="https://docs.godotengine.org/en/stable/community/contributing/index.html">Contribute</a></li>
				
				<li class="fund"><a href="https://fund.godotengine.org">❤&#xFE0E; Donate</a></li>
			</ul>
		</nav>
	</div>
</header>

<main>


<style>
	body {
		background-color: var(--background-color);
	}

	h1 {
		margin-bottom: 8px;
		margin-top: 32px;
	}

	:not(pre)>code {
		background: var(--code-background-color);
		padding: 1px 4px;
		font-size: 0.95em;
		border-radius: 3px;
	}

	pre {
		background: var(--codeblock-background-color);
		color: var(--codeblock-color);
	}

	pre code {
		display: block;
		overflow-x: auto;
		padding: .5em;
	}

	.date-big {
		line-height: 2;
		margin-left: 32px;
	}

	article {
		background-color: var(--base-color);
		box-shadow: 0px 3px 2px 0px rgba(0, 0, 0, 0.15);
	}

	figure {
		margin: 0;
	}

	figure img {
		margin: 0;
	}

	article img,
	article video {
		max-width: 100%;
		height: auto;
		display: block;
		margin: auto;
		margin-top: 16px;
		margin-bottom: 16px;
	}

	article h1 {
		margin-top: 64px;
	}

	article h2,
	article h3,
	article h4 {
		margin-top: 42px;
	}

	.article-info {
		display: flex;
		flex-direction: column;
		gap: 8px;
	}

	.article-metadata {
		display: flex;
		gap: 24px;
		align-items: center;
		font-family: var(--header-font-family);
		margin-bottom: 12px;
	}

	@media (max-width: 900px) {
		.article-metadata {
			flex-direction: column;
			align-items: flex-start;
			gap: 16px;
		}
	}

	.article-author {
		color: var(--base-color-text-subtitle-date);
		font-weight: 700;
		font-size: 18px;
		flex-grow: 1;
		display: flex;
		gap: 12px;
		align-items: center;
	}

	.article-author .avatar {
		border-radius: 100%;
		margin: 0;
	}

	.article-author .by {
		color: var(--base-color-text-subtitle);
	}

	.article-metadata .date {
		color: var(--base-color-text-subtitle-date);
	}

	.article-metadata .date.post-recent-highlight {
		color: var(--post-recent-highlight-color);
		opacity: 0.8;
	}

	.article-metadata .date.post-recent-highlight::after {
		font-size: 80%;
		content: "NEW";
		border: 2px solid var(--post-recent-highlight-color);
		padding: 2px 3px;
		margin-left: 8px;
	}

	.tag.active {
		filter: saturate(0.75);
	}

	@media screen and (min-width: 900px) {
		article .content {
			width: 70%;
			margin: auto;
		}
	}

	@media (max-width: 900px) {
		body {
			background-color: var(--base-color);
		}

		article {
			background-color: transparent;
			box-shadow: none;
		}

		article img:first-child,
		article video:first-child {
			max-width: 100%;
		}
	}
</style>

<link rel="stylesheet" href="/assets/css/highlight.obsidian.min.css">

<div class="container">
	<article class="padded">
		<div class="content article-container">
			<figure class="article-cover">
				

				<img src="/storage/app/uploads/public/60e/169/1fa/60e1691fab28c135981956.jpg" title=""
					alt=" " class="rounded-lg"
					style="width: 100%; height: auto; background-color: transparent;" />
			</figure>

			<div class="article-info">
				<h1>
					Godot XR progress update June 2021
				</h1>
				<div class="article-metadata">
					<div class="article-author">
						<span>By: </span>
						
						
							<img class="avatar" width="25" height="25" src="/assets/images/authors/bastiaan.jpg" alt="Bastiaan Olij" loading="lazy">
						
						<span class="by">Bastiaan Olij</span>
					</div>
					<span class="date" data-post-date="2021-07-04 00:00:00 +0000">  4 July 2021</span>
				</div>

				<div class="tags">
					
					<a href="/blog/progress-report">
						<div class="tag active">Progress Report</div>
					</a>
					
				</div>
			</div>

			



	<div class="card card-warning">
		<p>
		
			This article is from <strong>July 2021</strong>, some of its contents might be outdated and no longer accurate.<br>
			You can find up-to-date information about the engine in the <a href="https://docs.godotengine.org/en/stable/">official documentation</a>.
		
		</p>
	</div>





			<div class="article-body">
				<p>It’s been a few busy months so time for an update on the all things XR in Godot.</p>

<h1 id="official-release-of-the-openxr-plugin-for-godot-33">Official release of the OpenXR plugin for Godot 3.3</h1>

<p>The OpenXR plugin for Godot now has an official release that can be found in <a href="https://godotengine.org/asset-library/asset/986">the asset library</a>. We had to go through a few iterations as we’re now directly pulling the asset from the releases build by Githubs CI.</p>

<p>The plugin now supports the new motion ranges API added to OpenXR which works in combination with finger tracking to switch between the ability to make a closed fist or limit finger movement to the shape of the controller. More modes will become available as they are added to the OpenXR specification.</p>

<p>Finger tracking itself is fully supported both through updating orientation of meshes, for which a sample scene is included in the plugin, and through animating a skeleton and bone deformation.
There are a few changes to the OpenXR specification in the works around the skeleton implemention. Once these become official we’ll update the plugin and supply sample scenes as well.</p>

<p>The plugin has been tested on Linux with both Steam and Monado OpenXR runtimes and on Windows with both Steam and Oculus OpenXR runtimes.
Feature wise it is a great replacement for both the OpenVR and Oculus Desktop plugins including using the Oculus Quest over (air) link.</p>

<p>Windows Mixed Reality headsets are currently only supported through SteamVR as WMR natively only supports DirectX game engines.</p>

<p>We’re looking at Android and native Oculus Quest support for the near future.</p>

<p>The source for this plugin can be found <a href="https://github.com/GodotVR/godot_openxr">here</a>.
Further documentation on the plugin can be found <a href="https://github.com/GodotVR/godot_openxr/wiki">here</a>.</p>

<h1 id="godot-4-stereoscopic-rendering-through-multiview">Godot 4 stereoscopic rendering through Multiview</h1>

<p>One of the bigger changes we did to enabled XR support in Godot 4 is implementing multiview support into the rendering engine.</p>

<p>Multiview allows rendering of the images for both eyes simultaniously removing a lot of the overhead compared to rendering the two images in sequence as Godot 3 did.</p>

<p>The implementation within the mobile renderer was merged into master while support for the clustered rendering is functional but has a number of loose ends to tie up and can currently be evaluated through this <a href="https://github.com/godotengine/godot/pull/49092">draft PR</a>.</p>

<h1 id="further-mobile-renderer-improvements-in-godot-4">Further Mobile renderer improvements in Godot 4</h1>

<p>The next optimisation we are currently working on for the mobile renderer is introducing subpasses to the renderer. While a more general optimisation not just targetted at XR with many XR solutions targetting mobile architectures an important one none the less.</p>

<p>Mobile GPUs are very different from desktop GPU, to make better use of limited access to fast memory mobile GPUs use a tile based architecture. This means that the render buffer is divided into smaller tiles.
All geometry is processed first while the GPU keeps track of which triangles need to be rendered to each tile. Then each tile is processed one after the other rendering that tile and outputting the end result to the render buffer (I’m oversimplifying a lot here).</p>

<p>The advantage is much more efficient use of memory and due to the GPU capturing all triangles rendered to a tile it is able to sort them and pretty much eliminate overdraw.</p>

<p>The disadvantage becomes apparent when multiple passes are needed as we need to write the completed tiles into the render buffer and complete rendering all tiles before we can move onto the next pass.
At the start of the next pass we again process everything one tile at a time but now we need to read the data from the render buffer into the tile before we can render further geometry.
We introduce not only a fair bit of overhead writing to and then reading from the render buffer, we’re also introducing bottlenecks in waiting for one pass to finish before continuing to the next even when things can be handled in parallel.</p>

<p>Subpasses to the rescue!</p>

<p>Subpasses allow us to provide the GPU with information about how each pass relates to another.
It now knows if subsequent passes write to the same buffer and continue working on the same tile.
It now knows if the end result of one pass is the input for another pass, it can read from the finished tile and render to a new tile never writing out the intermediate result.
It can prevent a lot of needsless writing to and reading from slower memory.</p>

<p>This however comes at a tradeoff.</p>

<p>As we’re processing a tile there is no guarantee how far along adjacent tiles are. Any feature that requires reading adjacent pixels requires a pass to be finished.
Features such as refraction, glow and DOF require a pass to be finished and written to the render buffer and often copied to another buffer before continuing onto the next pass.</p>

<p>The first iteration will likely disable these types of features but we will reintroduce (some of) them with the understanding that they come at great cost on especially lower end hardware when turned on.</p>

<p>You can follow the work in this <a href="https://github.com/godotengine/godot/pull/49924">draft PR</a>.</p>

<p>There are more optimisations we are looking at doing after we’re done with subpasses, the one I’m personally looking most forward to is implementing Variable Rate Shading.
While VRS has various other applications, for XR this is a very efficient way to handle foviated rendering.</p>

<h1 id="godot-4-openvr-prototype-plugin">Godot 4 OpenVR prototype plugin</h1>

<p>The last thing I want to touch upon on this overview is that we have a working prototype of the OpenVR plugin for Godot 4.</p>

<p>While our focus lies with OpenXR and it is likely OpenXR will make OpenVR obsolete as an interface, the changes to the OpenVR plugin to switch from OpenGL to Vulkan involve a lot less work then any of the other plugins.</p>

<p>It made it an ideal prototyping candidate to verify stereoscopic rendering in Godot 4 was actually working as advertised and indeed was instrumental in fixing a few gnarly bugs in the core implementation.</p>

<p>The bulk of the work was actually in porting our Godot XR tools support library to Godot 4, seeing this library is used by the other plugins as well this was time well spend.
We’re still working on porting this toolset as it uses a few reworked features in GDScript that are still in development.</p>

<p>If you want to have a play check out this <a href="https://github.com/GodotVR/godot_openvr/pull/123">draft PR</a>.</p>

			</div>
		</div>
	</article>
</div>

<link rel="stylesheet" href="/assets/css/anchor-link.css?1">
<link rel="stylesheet" href="/assets/css/article-cards.css?2">
<script src="/assets/js/anchor-link.js"></script>
<script>
	document.addEventListener('DOMContentLoaded', () => {
		// Add icons to easily copy section links.
		window.applyAnchorLinks('.article-body');

		// Add lightbox elements in blog articles for Tobii.
		document.querySelectorAll('.article-cover img, .article-body img').forEach((articleImg) => {
			if (articleImg.classList.contains('lightbox-ignore')) {
				return;
			}

			const lightbox = document.createElement('a');
			lightbox.href = articleImg.src;
			lightbox.classList.add('lightbox');
			lightbox.dataset.group = 'article';
			articleImg.parentNode.appendChild(lightbox);
			lightbox.appendChild(articleImg);
		});
	});
</script>

</main>

<footer>
	<div class="container flex footer-container">
		<div id="copyright">
			<p>
				© 2007-2024 Juan Linietsky, Ariel Manzur and <a
					href="https://github.com/godotengine/godot/blob/master/AUTHORS.md" target="_blank"
					rel="noopener">contributors</a>.<br>
				Hosted by the <a href="https://godot.foundation/" target="_blank" rel="noopener">Godot Foundation</a>.<br>
				Website <a href="https://github.com/godotengine/godot-website" target="_blank" rel="noopener">source code on  GitHub</a>.
			</p>
		</div>
		<div id="sitemap">
			<ul class="sitemap-group">
				<li><strong>Get Godot</strong></li>
				<li><a href="/download/windows" class="set-os-download-url">Download</a></li>
				<li><a href="https://editor.godotengine.org/releases/latest/">Web Editor</a></li>
				<li>&nbsp;</li>
				<li><strong>Public Relations</strong></li>
				<li><a href="/blog">Blog</a></li>
				<li><a href="/community">Communities and Events</a></li>
				<li><a href="/press">Press Kit</a></li>
			</ul>
			<ul class="sitemap-group">
				<li><strong>About Godot</strong></li>
				<li><a href="/features">Features</a></li>
				<li><a href="/showcase">Showcase</a></li>
				<li><a href="/education">Education</a></li>
				<li><a href="/license">License</a></li>
				<li><a href="/code-of-conduct">Code of Conduct</a></li>
				<li><a href="/privacy-policy">Privacy Policy</a></li>
				<li><a href="https://fund.godotengine.org">Donate</a></li>
			</ul>
			<ul class="sitemap-group">
				<li><strong>Project Team</strong></li>
				<li><a href="/governance">Governance</a></li>
				<li><a href="/teams">Teams</a></li>
				<li>&nbsp;</li>
				<li><strong>Extra Resources</strong></li>
				<li><a href="/asset-library/asset">Asset Library</a></li>
				<li><a href="https://docs.godotengine.org">Documentation</a></li>
				<li><a href="https://github.com/godotengine">Code Repository</a></li>
			</ul>
		</div>
		<div id="social" class="dark-desaturate">
			<h4 class="text-right"><a href="/contact">Contact us</a></h4>
			<div class="flex justify-space-between" style="gap: 3px;">
				<a href="https://github.com/godotengine" target="_blank" rel="noopener">
					<img src="/assets/footer/github_logo.svg" width="32" height="32" alt="GitHub">
				</a>
				<a href="https://mastodon.gamedev.place/@godotengine" target="_blank" rel="noopener">
					<img src="/assets/footer/mastodon_logo.svg" width="32" height="32" alt="Mastodon">
				</a>
				<a href="https://twitter.com/godotengine" target="_blank" rel="noopener">
					<img src="/assets/footer/twitter_logo.svg" width="32" height="32" alt="Twitter">
				</a>
				<a href="https://www.facebook.com/groups/godotengine/" target="_blank" rel="noopener">
					<img src="/assets/footer/facebook_logo.svg" width="32" height="32" alt="Facebook">
				</a>
				<a href="https://www.reddit.com/r/godot" target="_blank" rel="noopener">
					<!-- Zero-width space in the `alt` text to prevent content blockers from blocking the icon -->
					<img src="/assets/footer/reddit_logo.svg" width="32" height="32" alt="Red​dit">
				</a>
				<a href="/rss.xml" target="_blank" rel="noopener">
					<!-- Icon is called `feed` instead of `rss` to prevent content blockers from blocking the icon -->
					<img src="/assets/footer/feed_logo.svg" width="32" height="32" alt="RSS feed">
				</a>
			</div>
		</div>
	</div>
</footer>

<script defer src="/assets/js/tobii.min.js"></script>
<script defer src="/assets/js/highlight.min.js?1"></script>
<script defer src="/assets/js/highlight.gdscript.min.js?1"></script>
<script>
	document.addEventListener('DOMContentLoaded', () => {
		// This needs to be done on page load but also after page changes,
		// in case a code block appears in an article.
		document.querySelectorAll('pre code').forEach((block) => {
			hljs.highlightBlock(block);
		});

		document.querySelectorAll('[data-post-date]').forEach((postDate) => {
			// Highlight post dates that are less than 48 hours old.
			if (Date.parse(postDate.dataset.postDate) > (Date.now() - 1000 * 60 * 60 * 48)) {
				postDate.classList.add("post-recent-highlight");
			};
		});

		// Initialize lightbox.
		new Tobii({
			zoom: false,
		});

		// Update any download link to point to identified user's OS.
		const links = document.querySelectorAll('.set-os-download-url');
		for (let i = 0; i < links.length; i++) {
			const link = links[i];
			let link_slug = 'download';
			if ('version' in link.dataset && link.dataset['version'] === '3') {
				link_slug = 'download/3.x';
			}

			let link_platform = 'windows';
			if (navigator.platform.indexOf('Mac') !== -1) {
				link_platform = 'macos';
			} else if (navigator.platform.indexOf('Linux') !== -1) {
				link_platform = 'linux';
			}

			link.href = `/${link_slug}/${link_platform}`;
		}
	});
</script>


</body>

</html>
